<!-- Форма створення/редагування поста -->
<section class="post-form">
  <div class="post-form__header">
    <a routerLink="/admin/dashboard" class="post-form__back">{{ i18n.t('postForm.back') }}</a>
    <h1 class="post-form__title">
      {{ isEditMode ? i18n.t('postForm.edit') : i18n.t('postForm.new') }}
    </h1>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSave()" class="post-form__form">
    <!-- URL головного зображення -->
    <div class="post-form__field">
      <label class="post-form__label">{{ i18n.t('postForm.coverLabel') }}</label>
      <input
        formControlName="coverImage"
        class="post-form__input"
        placeholder="https://example.com/image.jpg"
      />
    </div>

    <!-- Вибір мов для заповнення -->
    <div class="post-form__field">
      <label class="post-form__label">{{ i18n.t('postForm.selectLanguages') }}</label>
      <div class="post-form__lang-checkboxes">
        @for (lang of langs; track lang) {
          <label class="post-form__lang-checkbox">
            <input
              type="checkbox"
              [(ngModel)]="selectedLanguages[lang]"
              [ngModelOptions]="{ standalone: true }"
            />
            <span>{{ i18n.t('lang.' + lang) }}</span>
          </label>
        }
      </div>
    </div>

    <!-- Табби для мов -->
    <div class="post-form__tabs">
      @for (lang of langs; track lang) {
        @if (selectedLanguages[lang]) {
          <button
            type="button"
            class="post-form__tab"
            [class.post-form__tab--active]="activeTab === lang"
            (click)="switchTab(lang)"
          >
            {{ i18n.t('lang.' + lang) }}
          </button>
        }
      }
    </div>

    <!-- Контент для української -->
    @if (activeTab === 'uk' && selectedLanguages['uk']) {
      <div class="post-form__tab-content">
        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.titleLabel') }} (UA)</label>
          <input
            formControlName="titleUk"
            class="post-form__input"
            [placeholder]="i18n.t('postForm.titlePlaceholder')"
          />
        </div>

        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.shortDescLabel') }} (UA)</label>
          <textarea
            formControlName="shortDescriptionUk"
            class="post-form__textarea post-form__textarea--short"
            [placeholder]="i18n.t('postForm.shortDescPlaceholder')"
            rows="3"
          ></textarea>
        </div>

        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.contentLabel') }} (UA)</label>
          <textarea
            formControlName="contentUk"
            class="post-form__textarea"
            [placeholder]="i18n.t('postForm.contentPlaceholder')"
            rows="15"
          ></textarea>
        </div>
      </div>
    }

    <!-- Контент для польської -->
    @if (activeTab === 'pl' && selectedLanguages['pl']) {
      <div class="post-form__tab-content">
        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.titleLabel') }} (PL)</label>
          <input
            formControlName="titlePl"
            class="post-form__input"
            [placeholder]="i18n.t('postForm.titlePlaceholder')"
          />
        </div>

        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.shortDescLabel') }} (PL)</label>
          <textarea
            formControlName="shortDescriptionPl"
            class="post-form__textarea post-form__textarea--short"
            [placeholder]="i18n.t('postForm.shortDescPlaceholder')"
            rows="3"
          ></textarea>
        </div>

        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.contentLabel') }} (PL)</label>
          <textarea
            formControlName="contentPl"
            class="post-form__textarea"
            [placeholder]="i18n.t('postForm.contentPlaceholder')"
            rows="15"
          ></textarea>
        </div>
      </div>
    }

    <!-- Контент для англійської -->
    @if (activeTab === 'en' && selectedLanguages['en']) {
      <div class="post-form__tab-content">
        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.titleLabel') }} (EN)</label>
          <input
            formControlName="titleEn"
            class="post-form__input"
            [placeholder]="i18n.t('postForm.titlePlaceholder')"
          />
        </div>

        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.shortDescLabel') }} (EN)</label>
          <textarea
            formControlName="shortDescriptionEn"
            class="post-form__textarea post-form__textarea--short"
            [placeholder]="i18n.t('postForm.shortDescPlaceholder')"
            rows="3"
          ></textarea>
        </div>

        <div class="post-form__field">
          <label class="post-form__label">{{ i18n.t('postForm.contentLabel') }} (EN)</label>
          <textarea
            formControlName="contentEn"
            class="post-form__textarea"
            [placeholder]="i18n.t('postForm.contentPlaceholder')"
            rows="15"
          ></textarea>
        </div>
      </div>
    }

    <!-- Автори (через кому) -->
    <div class="post-form__field">
      <label class="post-form__label">{{ i18n.t('postForm.authorsLabel') }}</label>
      <input
        [(ngModel)]="authorsInput"
        [ngModelOptions]="{ standalone: true }"
        class="post-form__input"
        placeholder="Author 1, Author 2"
      />
    </div>

    <!-- Хештеги (через кому) -->
    <div class="post-form__field">
      <label class="post-form__label">{{ i18n.t('postForm.tagsLabel') }}</label>
      <input
        [(ngModel)]="tagsInput"
        [ngModelOptions]="{ standalone: true }"
        class="post-form__input"
        placeholder="angular, web-dev, typescript"
      />
    </div>

    <!-- Чекбокс публікації -->
    <div class="post-form__field post-form__field--checkbox">
      <label class="post-form__checkbox-label">
        <input type="checkbox" formControlName="published" />
        <span>{{ i18n.t('postForm.publish') }}</span>
      </label>
    </div>

    <!-- Чекбокс актуального -->
    <div class="post-form__field post-form__field--checkbox">
      <label class="post-form__checkbox-label">
        <input type="checkbox" formControlName="featured" />
        <span>{{ i18n.t('postForm.featured') }}</span>
      </label>
    </div>

    <!-- Кнопки дій -->
    <div class="post-form__actions">
      <a routerLink="/admin/dashboard" class="post-form__cancel">{{ i18n.t('postForm.cancel') }}</a>
      <button
        type="submit"
        class="post-form__save"
        [disabled]="saving"
      >
        @if (saving) {
          {{ i18n.t('postForm.saving') }}
        } @else {
          {{ isEditMode ? i18n.t('postForm.update') : i18n.t('postForm.create') }}
        }
      </button>
    </div>
  </form>
</section>
