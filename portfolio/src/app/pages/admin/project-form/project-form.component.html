<!-- Форма створення/редагування проєкту -->
<section class="project-form">
  <div class="project-form__header">
    <a routerLink="/admin/dashboard" class="project-form__back">{{ i18n.t('projectForm.back') }}</a>
    <h1 class="project-form__title">
      {{ isEditMode ? i18n.t('projectForm.edit') : i18n.t('projectForm.new') }}
    </h1>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSave()" class="project-form__form">
    <!-- URL головного зображення -->
    <div class="project-form__field">
      <label class="project-form__label">{{ i18n.t('projectForm.coverLabel') }}</label>
      <input
        formControlName="coverImage"
        class="project-form__input"
        placeholder="https://example.com/image.jpg"
      />
    </div>

    <!-- Вибір мов для заповнення -->
    <div class="project-form__field">
      <label class="project-form__label">{{ i18n.t('projectForm.selectLanguages') }}</label>
      <div class="project-form__lang-checkboxes">
        @for (lang of langs; track lang) {
          <label class="project-form__lang-checkbox">
            <input
              type="checkbox"
              [(ngModel)]="selectedLanguages[lang]"
              [ngModelOptions]="{ standalone: true }"
            />
            <span>{{ i18n.t('lang.' + lang) }}</span>
          </label>
        }
      </div>
    </div>

    <!-- Табби для мов -->
    <div class="project-form__tabs">
      @for (lang of langs; track lang) {
        @if (selectedLanguages[lang]) {
          <button
            type="button"
            class="project-form__tab"
            [class.project-form__tab--active]="activeTab === lang"
            (click)="switchTab(lang)"
          >
            {{ i18n.t('lang.' + lang) }}
          </button>
        }
      }
    </div>

    <!-- Контент для української -->
    @if (activeTab === 'uk' && selectedLanguages['uk']) {
      <div class="project-form__tab-content">
        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.titleLabel') }} (UA)</label>
          <input
            formControlName="titleUk"
            class="project-form__input"
            [placeholder]="i18n.t('projectForm.titlePlaceholder')"
          />
        </div>

        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.shortDescLabel') }} (UA)</label>
          <textarea
            formControlName="shortDescriptionUk"
            class="project-form__textarea project-form__textarea--short"
            [placeholder]="i18n.t('projectForm.shortDescPlaceholder')"
            rows="3"
          ></textarea>
        </div>

        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.contentLabel') }} (UA)</label>
          <textarea
            formControlName="contentUk"
            class="project-form__textarea"
            [placeholder]="i18n.t('projectForm.contentPlaceholder')"
            rows="15"
          ></textarea>
        </div>
      </div>
    }

    <!-- Контент для польської -->
    @if (activeTab === 'pl' && selectedLanguages['pl']) {
      <div class="project-form__tab-content">
        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.titleLabel') }} (PL)</label>
          <input
            formControlName="titlePl"
            class="project-form__input"
            [placeholder]="i18n.t('projectForm.titlePlaceholder')"
          />
        </div>

        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.shortDescLabel') }} (PL)</label>
          <textarea
            formControlName="shortDescriptionPl"
            class="project-form__textarea project-form__textarea--short"
            [placeholder]="i18n.t('projectForm.shortDescPlaceholder')"
            rows="3"
          ></textarea>
        </div>

        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.contentLabel') }} (PL)</label>
          <textarea
            formControlName="contentPl"
            class="project-form__textarea"
            [placeholder]="i18n.t('projectForm.contentPlaceholder')"
            rows="15"
          ></textarea>
        </div>
      </div>
    }

    <!-- Контент для англійської -->
    @if (activeTab === 'en' && selectedLanguages['en']) {
      <div class="project-form__tab-content">
        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.titleLabel') }} (EN)</label>
          <input
            formControlName="titleEn"
            class="project-form__input"
            [placeholder]="i18n.t('projectForm.titlePlaceholder')"
          />
        </div>

        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.shortDescLabel') }} (EN)</label>
          <textarea
            formControlName="shortDescriptionEn"
            class="project-form__textarea project-form__textarea--short"
            [placeholder]="i18n.t('projectForm.shortDescPlaceholder')"
            rows="3"
          ></textarea>
        </div>

        <div class="project-form__field">
          <label class="project-form__label">{{ i18n.t('projectForm.contentLabel') }} (EN)</label>
          <textarea
            formControlName="contentEn"
            class="project-form__textarea"
            [placeholder]="i18n.t('projectForm.contentPlaceholder')"
            rows="15"
          ></textarea>
        </div>
      </div>
    }

    <!-- Посилання на демо -->
    <div class="project-form__field">
      <label class="project-form__label">{{ i18n.t('projectForm.demoLabel') }}</label>
      <input
        formControlName="liveUrl"
        class="project-form__input"
        placeholder="https://my-project.vercel.app"
      />
    </div>

    <!-- Посилання на репозиторій -->
    <div class="project-form__field">
      <label class="project-form__label">{{ i18n.t('projectForm.repoLabel') }}</label>
      <input
        formControlName="repoUrl"
        class="project-form__input"
        placeholder="https://github.com/user/repo"
      />
    </div>

    <!-- Автори (через кому) -->
    <div class="project-form__field">
      <label class="project-form__label">{{ i18n.t('projectForm.authorsLabel') }}</label>
      <input
        [(ngModel)]="authorsInput"
        [ngModelOptions]="{ standalone: true }"
        class="project-form__input"
        placeholder="Author 1, Author 2"
      />
    </div>

    <!-- Хештеги (через кому) -->
    <div class="project-form__field">
      <label class="project-form__label">{{ i18n.t('projectForm.tagsLabel') }}</label>
      <input
        [(ngModel)]="tagsInput"
        [ngModelOptions]="{ standalone: true }"
        class="project-form__input"
        placeholder="angular, web-dev, typescript"
      />
    </div>

    <!-- Галерея (URL по рядку) -->
    <div class="project-form__field">
      <label class="project-form__label">{{ i18n.t('projectForm.galleryLabel') }}</label>
      <textarea
        [(ngModel)]="galleryInput"
        [ngModelOptions]="{ standalone: true }"
        class="project-form__textarea project-form__textarea--short"
        placeholder="https://example.com/photo1.jpg&#10;https://example.com/photo2.jpg"
        rows="5"
      ></textarea>
    </div>

    <!-- Дата створення проєкту (необов'язково) -->
    <div class="project-form__field">
      <label class="project-form__label">{{ i18n.t('projectForm.projectDateLabel') }}</label>
      <input
        formControlName="projectDate"
        type="date"
        class="project-form__input"
      />
    </div>

    <!-- Чекбокс публікації -->
    <div class="project-form__field project-form__field--checkbox">
      <label class="project-form__checkbox-label">
        <input type="checkbox" formControlName="published" />
        <span>{{ i18n.t('projectForm.publish') }}</span>
      </label>
    </div>

    <!-- Чекбокс актуального -->
    <div class="project-form__field project-form__field--checkbox">
      <label class="project-form__checkbox-label">
        <input type="checkbox" formControlName="featured" />
        <span>{{ i18n.t('projectForm.featured') }}</span>
      </label>
    </div>

    <!-- Кнопки дій -->
    <div class="project-form__actions">
      <a routerLink="/admin/dashboard" class="project-form__cancel">{{ i18n.t('projectForm.cancel') }}</a>
      <button
        type="submit"
        class="project-form__save"
        [disabled]="form.invalid || saving"
      >
        @if (saving) {
          {{ i18n.t('projectForm.saving') }}
        } @else {
          {{ isEditMode ? i18n.t('projectForm.update') : i18n.t('projectForm.create') }}
        }
      </button>
    </div>
  </form>
</section>
